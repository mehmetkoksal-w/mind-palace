# Core Concepts

Mind Palace is built around a small set of contracts. Each concept has an embedded JSON Schema (canonical) and, when applicable, a curated JSONC representation in `.palace/`.

## Palace
The root curated manifest `.palace/palace.jsonc` describing the project, default room, and guardrails. Output paths are fixed by convention (`.palace/index/palace.db`, `.palace/outputs/context-pack.json`) and are not configurable. Validated against the embedded `palace` schema. It is the entry point for agents and humans.

## Rooms
Curated JSONC files under `.palace/rooms/*.jsonc`. A room answers “where should I look?” by defining entry points and evidence to collect. Rooms are optional but recommended to direct agents to relevant files.

## Playbooks
Curated JSONC files under `.palace/playbooks/*.jsonc`. A playbook answers “how do I execute this kind of change?” by describing routes through rooms, required evidence, and verification expectations. They do not run code; they set contracts.

## Project Profile
Generated by `palace detect` into `.palace/project-profile.json`. Captures language/framework signals and is validated (JSON, not JSONC) against the embedded `project-profile` schema.

## Index (Tier-0)
Generated SQLite database at `.palace/index/palace.db` (WAL, FTS5) plus a validated scan summary at `.palace/index/scan.json`. Built by `palace scan` with deterministic chunking, hashing, and file metadata (size + normalized modtime).

## Context Pack
Generated JSON at `.palace/outputs/context-pack.json`. Assembled by `palace collect` from curated manifests + existing index. Carries goal, scan identity, referenced files, findings, and scope metadata. Validated against the embedded `context-pack` schema.

## Change Signal
Generated JSON at `.palace/outputs/change-signal.json` by `palace signal --diff <range>`. Describes changed files (added/modified/deleted), normalized paths, hashes for present files, and provenance. Validated against the embedded `change-signal` schema.

## Guardrails
Patterns the CLI must not touch (do-not-touch) or should treat as read-only. Defaults include `.git/**`, `.palace/**`, `node_modules/**`, etc. User-defined globs extend (never replace) defaults. Guardrails are enforced across scan/collect/verify/signal.

## Curated vs Generated
- **Curated (commit)**: `.palace/palace.jsonc`, `.palace/rooms/*.jsonc`, `.palace/playbooks/*.jsonc`, `.palace/project-profile.json`, `.palace/schemas/*`.
- **Generated (ignore)**: `.palace/index/*`, `.palace/outputs/*`, `.palace/maps/*`, any `*.db`. A future `.palace/sessions/` may be introduced but is not created today.
Embedded schemas are always canonical; exported copies under `.palace/schemas` are for transparency only.
