# Workflows

Mind Palace supports three primary workflows: **The Individual Developer**, **The Agentic Loop**, and **The CI Guardian**.

---

## The Individual Developer

### 1. Setup (Once)

```sh
palace init --detect   # Auto-detect project and create rooms
palace scan            # Build the first index
```

### 2. Daily Loop

As you code, the Palace keeps track of your decisions and provides context.

```sh
# Record a decision while it's fresh
palace store "Let's use JWT instead of sessions"

# Find that utility function you wrote last week
palace explore "data transformation utility"

# Get a quick brief before editing a complex file
palace brief src/core/auth_handler.go
```

### 3. Housekeeping

Keep your Palace tidy and up-to-date.

```sh
palace clean          # Cleanup old sessions/agents
palace update          # Keep the CLI tool current
```

---

## The Agentic Loop (MCP)

This is where the Palace truly shines, providing high-fidelity context to AI agents like Claude or Cursor.

### 1. Connection

Configure your MCP client to use the `serve` command:

```json
{
  "mcpServers": {
    "mind-palace": {
      "command": "palace",
      "args": ["serve", "--root", "/path/to/project"]
    }
  }
}
```

### 2. The Loop

1.  **Agent asks**: "How do I add a new route?"
2.  **Palace provides**:
    - `search_mind_palace` results.
    - `get_graph` call relationships.
    - Relevant `learnings` and `decisions`.
3.  **Agent implements**: Based on curated context.
4.  **Agent learns**: Calls `store` to record what it discovered about the code.

---

## The CI Guardian

Ensure your index is never stale and valid schemas are enforced.

### 1. Verification

Add a step to your CI pipeline:

```sh
palace check --strict --diff ${{ github.sha }}
```

### 2. Context Collection

Generate context for the change set to assist AI PR reviewers:

```sh
palace check --collect --signal --diff origin/main..HEAD
```

---

## Brain Workflow

Don't let your architectural knowledge rot in Slack or Jira. Commit it to the code.

1.  **Capture**: `palace store "Decision: use FTS5 for search"`
2.  **Link**: `palace recall link d_search --inspired-by d_sqlite`
3.  **Outcome**: `palace recall update d_search success`
4.  **Review**: See the timeline in the **Dashboard**.

---

## Visualizing with the Dashboard

For a high-level view of your palace:

```sh
palace dashboard
```

- **Hotspot Map**: See which files are changing most frequently.
- **Dependency Graph**: Explore how rooms and services interact.
- **Knowledge Timeline**: See the history of project decisions.
